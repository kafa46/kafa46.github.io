
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3.3. Blueprint 클래스 활용 &#8212; Flask Tutorial for CJU Students</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3.4. ORM 모델 완벽 이해" href="sec03_ch04_ORM_model.html" />
    <link rel="prev" title="3.2. Application Factory 패턴" href="sec03_ch02_application_factory.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/prof_noh.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Flask Tutorial for CJU Students</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="이 책 검색 ..." aria-label="이 책 검색 ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   Flask Tutorial을 시작하며
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ch01_intro_to_flask.html">
   1. Flask 소개 (Intro)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch02_todo_list.html">
     1.3. Flask를 위한 사전 준비 목록
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch03_prep_intro_to_vscode.html">
     1.4. 준비 1. VS Code 소개 및 설치
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch04_prep_anaconda_env.html">
     1.5. 준비 2. 가상환경 및
     <code class="docutils literal notranslate">
      <span class="pre">
       anaconda
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch05_prep_flask_installation.html">
     1.6. 준비 3.
     <code class="docutils literal notranslate">
      <span class="pre">
       flask
      </span>
     </code>
     설치
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch06_prep_gitignore.html">
     1.7. 준비 4.
     <code class="docutils literal notranslate">
      <span class="pre">
       .gitignore
      </span>
     </code>
     세팅
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch07_prep_dependancy_requirements.html">
     1.8. 준비 5. 의존성 파일
     <code class="docutils literal notranslate">
      <span class="pre">
       requirement.txt
      </span>
     </code>
     생성
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ch08_hello_world_flask.html">
   2. 맛보기로 만드는 flask app
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch08-1_first_app_helloCJU.html">
     2.1. Flask app 코딩
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch08-2_run_flask_server.html">
     2.2. Flask 서버 실행
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch08-3_setting_FLAK_APP.html">
     2.3.
     <code class="docutils literal notranslate">
      <span class="pre">
       FLASK_APP
      </span>
     </code>
     설정
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch08-4_setting_develop_mode.html">
     2.4. 개발자 모드 설정
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="sec03_ch00_intro_fundamentals.html">
   3. Flask 기본 구조 소개
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="sec03_ch01_basic_project_structure.html">
     3.1. 프로젝트 기본 구조
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sec03_ch02_application_factory.html">
     3.2. Application Factory 패턴
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     3.3. Blueprint 클래스 활용
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="sec03_ch04_ORM_model.html">
     3.4. ORM 모델 완벽 이해
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="sec03_ch04-01_flask_ORM_library.html">
       3.4.1. Flask ORM 설치
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="sec03_ch04-02_design_model.html">
       3.4.2. 모델 설계 및 만들기
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="sec03_ch04-03_create_table.html">
       3.4.3. DB 테이블 만들기
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="sec03_ch04-04_chedk_model.html">
       3.4.4. 시각화 도구로 모델 확인
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="sec03_ch04-05_use_model.html">
       3.4.5. 모델에 CRUD 해보기
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="sec03_ch05_question_coding.html">
     3.5. 질문 게시판 만들기
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="sec03_ch05-01_make_question_list_and_read.html">
       3.5.1. Question List 조회
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="sec03_ch05-02_read_question_detail.html">
       3.5.2. Question 상세 조회
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="sec03_ch05-03_404_error_handling.html">
       3.5.3. 존재하지 않는 페이지 처리 - 404 오류
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="sec03_ch05-04_blueprint_func_seperation.html">
       3.5.4. 기능 분리 - Blueprint 활용
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sec03_ch06_reply_coding.html">
     3.6. 게시판 댓글 구현
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sec03_ch07_register_question.html">
     3.7. 질문 &amp; 댓글 등록 - Flask Form 활용
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sec03_ch08_applying_CSS.html">
     3.8. 예쁘게 - CSS 적용
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sec03_ch09_applying_Bootstrap.html">
     3.9. 더 예쁘게 - Bootstrap 활용
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sec03_ch10_templates_inheritance.html">
     3.10. HTML 구조와 Template 상속
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sec03_ch11_section_closing_comment.html">
     3.11. Flask 기본기 마치며…
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Section04_system_deploy/sec04_ch00_intro_distribution.html">
   4. 서비스 배포
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Section04_system_deploy/sec04_ch01_server.html">
     4.1. 서버(Server)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Section04_system_deploy/sec04_ch02_web_server.html">
     4.2. 웹 서버
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Section04_system_deploy/sec04_ch03_middleware.html">
     4.3. 미들웨어
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Appendix/apdx00_appendix_list.html">
   5. Appendix List
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Appendix/apdx01_monolithic_vs_msa.html">
     5.1. Monolithic vs. MSA
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Appendix/apdx02_subdomain.html">
     5.2. 서브도메인(Sub-domain)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Appendix/apdx03_aws_sing_up.html">
     5.3. 아마존 AWS 회원가입
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="탐색 전환" aria-controls="site-navigation"
                title="탐색 전환" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="이 페이지 다운로드"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/Contents/Section03_building_fundamentals/sec03_ch03_Blueprint_class.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="소스 파일 다운로드" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="PDF로 인쇄"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="소스 저장소"><i
                    class="fab fa-github"></i>저장소</button></a>
        <a class="issues-button"
            href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FContents/Section03_building_fundamentals/sec03_ch03_Blueprint_class.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="이슈 열기"><i class="fas fa-lightbulb"></i>열린 문제</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="전체 화면으로보기"
        title="전체 화면으로보기"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Blueprint 클래스 활용</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="blueprint">
<h1><span class="section-number">3.3. </span>Blueprint 클래스 활용<a class="headerlink" href="#blueprint" title="Permalink to this headline">¶</a></h1>
<p>우리는 다음과 같이 기본기 2가지를 공부하였습니다.</p>
<div class="admonition-flask-10 admonition">
<p class="admonition-title">Flask 웹 시스템 구축을 위한 10가지 기본기</p>
<ol class="simple">
<li><p><a class="reference internal" href="sec03_ch01_basic_project_structure.html"><span class="doc std std-doc">프로젝트 기본 구조</span></a> <span class="math notranslate nohighlight">\(\to\)</span> <code class="docutils literal notranslate"><span class="pre">Clear!</span></code></p></li>
<li><p><a class="reference internal" href="sec03_ch02_application_factory.html"><span class="doc std std-doc">Application Factory 패턴</span></a> <span class="math notranslate nohighlight">\(\to\)</span> <code class="docutils literal notranslate"><span class="pre">Clear!</span></code></p></li>
<li><p><a class="reference internal" href="#"><span class="doc std std-doc">Blueprint 클래스 활용</span></a> <span class="math notranslate nohighlight">\(\to\)</span> 지금 도전!</p></li>
<li><p><a class="reference internal" href="sec03_ch04_ORM_model.html"><span class="doc std std-doc">ORM 모델 완벽 이해</span></a></p></li>
<li><p><a class="reference internal" href="sec03_ch05_question_coding.html"><span class="doc std std-doc">질문 게시판 만들기</span></a></p></li>
<li><p><a class="reference internal" href="sec03_ch06_reply_coding.html"><span class="doc std std-doc">게시판 댓글 구현</span></a></p></li>
<li><p><a class="reference internal" href="sec03_ch07_register_question.html"><span class="doc std std-doc">질문 &amp; 댓글 등록 - Flask Form 활용</span></a></p></li>
<li><p><a class="reference internal" href="sec03_ch08_applying_CSS.html"><span class="doc std std-doc">예쁘게 - CSS 적용</span></a></p></li>
<li><p><a class="reference internal" href="sec03_ch09_applying_Bootstrap.html"><span class="doc std std-doc">더 예쁘게 - Bootstrap 활용</span></a></p></li>
<li><p><a class="reference internal" href="sec03_ch10_templates_inheritance.html"><span class="doc std std-doc">HTML 구조와 Template 상속</span></a></p></li>
</ol>
</div>
<p>이번에 살펴볼 기본기는 블루프린트 (Blueprint) 클래스를 활용해서 웹사이트의 경로를 효율적으로 관리하는 방법입니다.</p>
<p>그렇다면 왜 Blueprint 클래스를 사용하는 것일까요?</p>
<p>그 이유를 찾기 위해 Application factory 패턴을 다시 한번 살펴 볼까요?</p>
<p><code class="docutils literal notranslate"><span class="pre">hello_cju/__init__.py</span></code>에 있는 <code class="docutils literal notranslate"><span class="pre">create_app</span></code> 함수 내부에 우리가 서비스하고자 하는 웹페이지에 해당하는 URL 경로를 <code class="docutils literal notranslate"><span class="pre">/</span></code>에 매칭시켰습니다. 참고로 우리가 처음 구현했던 <code class="docutils literal notranslate"><span class="pre">hello_cju.py</span></code>는 사용자가 접속하면 웹페이지에 <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">world!</span> <span class="pre">Welcome</span> <span class="pre">to</span> <span class="pre">CJU.</span></code>라는 문자열을 출력하는 간단한 서비스였습니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">hello_cju/__init__.py</span></code>에서는 해당 서비스의 경로를 <code class="docutils literal notranslate"><span class="pre">&#64;app.route('/')</span></code>라는 데코레이터를 이용하여 설정하였습니다. <code class="docutils literal notranslate"><span class="pre">hello_cju.py</span></code> 도 마찬가지입니다.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Flask에서 <code class="docutils literal notranslate"><span class="pre">&#64;app.route</span></code> 데코레이터를 이용하여 웹사이트의 경로를 매핑(설정)하는 함수를
<code class="docutils literal notranslate"><span class="pre">라우트(route)</span> <span class="pre">함수</span></code>라고 부릅니다.</p>
</div>
<p>그런데, 웹 시스템을 개발하다 보니 기능을 추가하여 해당 기능을 다른 페이지에, 즉 웹사이트 경로를 이용하여 서비스를 해야할 필요가 생겼습니다.</p>
<p>우리가 배운대로라면 새로운 웹사이트 경로가 필요할 때마다 <code class="docutils literal notranslate"><span class="pre">create_app</span></code> 함수 내부에서 라우트 함수 <code class="docutils literal notranslate"><span class="pre">app.route</span></code>를 이용해 계속해서 추가해야 합니다.</p>
<p>웹사이트 구조가 간단한 경우라면 별로 문제가 되지 않습니다.
하지만 웹사이트 기능과 서비스가 다양해지면 지금과 같은 방식으로는 효율적으로 개발하기 어려워집니다.
설령 개발을 끝마쳤다고 하더라도 유지보수 단계에서 많은 번거로운 작업을 해야 되므로 비효율적입니다.</p>
<p>이러한 개발 및 유지보수 효율성을 높일 수 있는 방법이 Blueprint 클래스를 이용하는 것입니다.</p>
<div class="admonition-blueprint admonition">
<p class="admonition-title">블루프린트(Blueprint)</p>
<p>블루프린트는 우리나라 말로 <code class="docutils literal notranslate"><span class="pre">청사진</span></code>이라는 뜻입니다. 캐드(CAD)와 같은 설계 소프트웨어가 없던 예전에는 설계도를 푸른색 종이에 그렸다고 합니다. 그래서 푸른색 종이, 청사진이 설계도를 의미하는 단어로 쓰이게 되었습니다.</p>
<p>Flask에서 블루프린트는 웹사이트에 접속하는 URL과 그 때 호출되는 함수와의 관계를 나타내는 일종의 <code class="docutils literal notranslate"><span class="pre">함수</span> <span class="pre">-</span> <span class="pre">URL</span> <span class="pre">설계도</span></code>로 이해하면 됩니다.</p>
</div>
<p>대략적인 개념은 다음과 같습니다.</p>
<ol class="simple">
<li><p>각 웹사이트 페이지별로 수행할 작업들은 <code class="docutils literal notranslate"><span class="pre">views.py</span></code>라는 별도의 모듈에 작성합니다. <code class="docutils literal notranslate"><span class="pre">views.py</span></code> 모듈에서 Blueprint 클래스를 이용하여 각각의 함수와 호출 URL을 매칭시킵니다.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hello_cju/__init__.py</span></code>에서는 각 웹페이지별 함수 기능과 URL을 전부 기록하지 않고  <code class="docutils literal notranslate"><span class="pre">views.py</span></code> 모듈에서 Blueprint 객체에 매칭된 URL을 등록해 주는 역할만 담당합니다.</p></li>
</ol>
<p>감이 잘 안잡히죠?</p>
<p>예제를 통해 Blueprint 클래스의 사용법과 작동 방식에 대하여 살펴보도록 하겠습니다.</p>
<p>먼저 <code class="docutils literal notranslate"><span class="pre">views</span></code> 디렉토리에 만들어 놓았던 <code class="docutils literal notranslate"><span class="pre">main_views.py</span></code> 파일을 열고 아래 코드를 입력합니다.
<code class="docutils literal notranslate"><span class="pre">main_views.py</span></code> 파일이 없다면 <code class="docutils literal notranslate"><span class="pre">views</span></code> 디렉토리 밑에 새로 만듭니다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Blueprint 클래스를 임포트 합니다.</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Blueprint</span> 

<span class="c1"># Blueprint 객체 bp를 생성합니다.</span>
<span class="n">bp</span> <span class="o">=</span> <span class="n">Blueprint</span><span class="p">(</span><span class="s1">&#39;main&#39;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">,</span> <span class="n">url_prefix</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>

<span class="c1"># Blueprint 객체 bp를 이용하여 함수와 URL을 매칭합니다.</span>
<span class="nd">@bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello_world</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Hello world! Welcome to CJU.&#39;</span>
</pre></div>
</div>
<p>위 코드를 간단히 분석해 보면, 먼저 <code class="docutils literal notranslate"><span class="pre">Blueprint</span></code> 클래스를 임포트하고 <code class="docutils literal notranslate"><span class="pre">bp</span></code>라는 이름을 가진 <code class="docutils literal notranslate"><span class="pre">Blueprint</span></code> 객체를 생성하였습니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">&#64;bp.route('/')</span></code>를 이용하여 <code class="docutils literal notranslate"><span class="pre">hello_world</span></code> 함수의 결과를 웹사이트 경로 <code class="docutils literal notranslate"><span class="pre">/</span></code>에 맵핑하였습니다.</p>
<p>위 코드는 <code class="docutils literal notranslate"><span class="pre">hello_cju/__init__.py</span></code>에 담긴 내용을 <code class="docutils literal notranslate"><span class="pre">views/main_view.py</span></code>로 옮겨 놓은 것입니다.
차이점은 <code class="docutils literal notranslate"><span class="pre">&#64;app.route</span></code> 데코레이터를 사용하는 대신 <code class="docutils literal notranslate"><span class="pre">&#64;bp.route</span></code>를 사용한다는 것입니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">Blueprint</span></code> 객체를 생성할 때 <code class="docutils literal notranslate"><span class="pre">bp</span> <span class="pre">=</span> <span class="pre">Blueprint('main',</span> <span class="pre">__name__,</span> <span class="pre">url_prefix='/')</span></code>  전달된 <code class="docutils literal notranslate"><span class="pre">main</span></code>, <code class="docutils literal notranslate"><span class="pre">__name__</span></code>, <code class="docutils literal notranslate"><span class="pre">url_prefix='/'</span></code>에 대하여 살펴보겠습니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">Blueprint</span></code> 클래스를 이용하여 객체를 생성할 때 다양한 인자값을 전달하여 생성할 수 있습니다.
자세한 내용은 flask 공식 문서의 <code class="docutils literal notranslate"><span class="pre">Blueprint</span></code> (<a class="reference external" href="https://flask.palletsprojects.com/en/2.0.x/api/?highlight=blueprint#flask.Blueprint">클릭</a>)를 참고하기 바랍니다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">flask</span><span class="o">.</span><span class="n">Blueprint</span><span class="p">(</span>
    <span class="n">name</span><span class="p">,</span> 
    <span class="n">import_name</span><span class="p">,</span> 
    <span class="n">static_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">static_url_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">template_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">url_prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">subdomain</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">url_defaults</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">root_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">cli_group</span><span class="o">=&lt;</span><span class="nb">object</span> <span class="nb">object</span><span class="o">&gt;</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Parameters:
    - name (str) 
        The name of the blueprint. 
        Will be prepended to 
        each endpoint name.
    
    - import_name (str) 
        The name of the blueprint package, 
        usually __name__.
        This helps locate the root_path 
        for the blueprint.

    - url_prefix (Optional[str])
        A path to prepend to all of 
        the blueprint’s URLs, 
        to make them distinct from 
        the rest of the app’s routes.

    - root_path (Optional[str]) 
        By default, the blueprint will 
        automatically set this based on 
        import_name. 
        In certain situations this automatic 
        detection can fail, so the path can 
        be specified manually instead.
</pre></div>
</div>
<p>Flask 공식 문서(<a class="reference external" href="https://flask.palletsprojects.com/en/2.0.x/api/?highlight=blueprint#flask.Blueprint">클릭</a>)에는 모든 인자에 <code class="docutils literal notranslate"><span class="pre">대한</span> <span class="pre">설명이</span> <span class="pre">제시되어</span> <span class="pre">있습니다.</span>&#160; <span class="pre">위</span> <span class="pre">코드는</span> <span class="pre">우리가</span> <span class="pre">사용할</span> <span class="pre">3개</span> <span class="pre">인자</span> </code>main<code class="docutils literal notranslate"><span class="pre">,</span> </code>import_name``, <code class="docutils literal notranslate"><span class="pre">url_prefix=</span></code>에 대한 설명만 표시하였습니다.</p>
<p>3개 인자 중에서 <code class="docutils literal notranslate"><span class="pre">main</span></code>, <code class="docutils literal notranslate"><span class="pre">import_name</span></code>는 반드시 제공해야 하는 값입니다.
<code class="docutils literal notranslate"><span class="pre">url_prefix=</span></code> 인자는 값을 제공해도 되고 생략해도 가능합니다. 생략하게 되면 디폴트(default) 값으로 <code class="docutils literal notranslate"><span class="pre">None</span></code>이 자동 지정됩니다. 각 인자값들이 의미하는 것에 대해 살펴보도록 하겠습니다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: <code class="docutils literal notranslate"><span class="pre">Blueprint</span></code> 이름입니다. 각각의 엔드포인트(endpoint) 앞에 붙게 됩니다.  나중에 <code class="docutils literal notranslate"><span class="pre">url_for()</span></code>를 이용하여 개별 함수가 갖는 경로를 쉽게 추출할 수 있습니다. </br>만약 <code class="docutils literal notranslate"><span class="pre">Blueprint</span></code> 객체의 <code class="docutils literal notranslate"><span class="pre">name</span></code> 인자로 <code class="docutils literal notranslate"><span class="pre">main</span></code>이 전달되었다면 <code class="docutils literal notranslate"><span class="pre">main.[함수명]</span></code> 형태로 사용하게 됩니다.</br></br></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">import_name</span></code>: <code class="docutils literal notranslate"><span class="pre">Blueprint</span></code> 패키지의 하부에 설정되는 모듈 이름입니다. 관용적으로 <code class="docutils literal notranslate"><span class="pre">__name__</span></code>을 사용합니다. <code class="docutils literal notranslate"><span class="pre">__name__</span></code>을 <code class="docutils literal notranslate"><span class="pre">import_name</span></code>의 인자값으로 지정하면, <code class="docutils literal notranslate"><span class="pre">&#64;bp.route()</span></code> 데코레이터(라우팅 함수) 바로 다음에 나오는 함수의 이름이 <code class="docutils literal notranslate"><span class="pre">Blueprint</span></code> 객체에 전달됩니다. </br>만약 <code class="docutils literal notranslate"><span class="pre">name</span></code>의 인자값으로 <code class="docutils literal notranslate"><span class="pre">main</span></code>이 전달되고, <code class="docutils literal notranslate"><span class="pre">import_name</span></code>의 인자값이 <code class="docutils literal notranslate"><span class="pre">__name__</span></code>으로 전달되고 바로 다음에 나오는 함수 이름이 <code class="docutils literal notranslate"><span class="pre">hello_cju</span></code>라고 한다면 <code class="docutils literal notranslate"><span class="pre">url_for</span></code> 함수를 이용해 웹페이지 주소를 추출하고자 할 경우 <code class="docutils literal notranslate"><span class="pre">url_for('main.hello_cju')</span></code>와 같이 사용합니다. </br>주로 <code class="docutils literal notranslate"><span class="pre">Blueprint</span></code>가 <code class="docutils literal notranslate"><span class="pre">root_path</span></code>를 위치시키는데 도움을 주는 역할을 합니다.</br></br></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">url_prefilx=</span></code>: 모든 <code class="docutils literal notranslate"><span class="pre">Blueprint</span></code>에 공통적으로 적용되는 URL 패턴입니다. URL 프리픽스(url_prefix)는 main_views.py 파일에 있는 함수들의 URL 앞에 항상 붙게 되는 프리픽스 URL을 의미합니다. </br>만약 위에서 url_prefix=‘/’ 대신 url_prefix=‘/main’ 이라고 선언했다면 hello_pybo 함수를 호출하기 위해서는 <a class="reference external" href="http://localhost:5000/">http://localhost:5000/</a> 대신 <a class="reference external" href="http://localhost:5000/main/">http://localhost:5000/main/</a> 이라고 호출해야 합니다.</br></br></p></li>
</ul>
<div class="admonition-endpoint admonition">
<p class="admonition-title">엔드포인트(endpoint)란?</p>
<p>엔드포인트는 인터넷 접속 주소의 마지막에 붙는 문자열을 의미합니다.
예를 들어 <code class="docutils literal notranslate"><span class="pre">Daum</span></code> 포털에서 뉴스 페이지를 검색한다고 가정해 봅니다.
<code class="docutils literal notranslate"><span class="pre">Daum</span></code> 뉴스는 <code class="docutils literal notranslate"><span class="pre">news.daum.net</span></code> 주소 아래에 분야별로 분류해 놓게 됩니다. 사회 뉴스는 <code class="docutils literal notranslate"><span class="pre">society</span></code>, 정치 뉴스는 <code class="docutils literal notranslate"><span class="pre">politics</span></code>, 경제 뉴스는 <code class="docutils literal notranslate"><span class="pre">economic</span></code> 등과 같이 분류합니다. 각각의 접근 URL은 다음과 유사한 형태를 갖습니다.</p>
<ul class="simple">
<li><p>사회 뉴스: <code class="docutils literal notranslate"><span class="pre">news.daum.net/society</span></code></p></li>
<li><p>정치 뉴스: <code class="docutils literal notranslate"><span class="pre">news.daum.net/politics</span></code></p></li>
<li><p>경제 뉴스: <code class="docutils literal notranslate"><span class="pre">news.daum.net/economic</span></code>
:
:
위 예제에서 <code class="docutils literal notranslate"><span class="pre">society</span></code>는 <code class="docutils literal notranslate"><span class="pre">news.daum.net</span></code>의 사회 뉴스 엔드포인트가 됩니다.
<code class="docutils literal notranslate"><span class="pre">politics</span></code>는 <code class="docutils literal notranslate"><span class="pre">news.daum.net</span></code>의 정치 뉴스 엔드포인트가 됩니다. <code class="docutils literal notranslate"><span class="pre">Daum</span></code> 뉴스의 경우 각 분야별로 엔드포인트가 존재하겠죠?</p></li>
</ul>
<p>이렇게 URL을 이용해서 서버가 제공하는 자원(resource)에 접근하도록 제공하는 것을 엔드포인트(endpoint)라고 부릅니다. 엔드포인트 개념은 REST(Representational State Transfer) API와 관련이 있습니다. 참고할 만한 REST API 블로그 <a class="reference external" href="https://khj93.tistory.com/entry/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-REST-API%EB%9E%80-REST-RESTful%EC%9D%B4%EB%9E%80">(클릭)</a></p>
</div>
<p>이제 <code class="docutils literal notranslate"><span class="pre">hello_cju/__init__.py</span></code> 파일을 아래와 같이 수정합니다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 파일명: hello_cju/__init__.py</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="k">def</span> <span class="nf">create_app</span><span class="p">():</span> <span class="c1"># 함수 생성</span>

    <span class="c1"># 기존에 hello_cju.py에 있던 영역</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
    
    <span class="c1"># views/main_view.py 모듈을 임포트합니다.</span>
    <span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">main_views</span>
    
    <span class="c1"># Flask 객체 app에 main_view 모듈에 있는 </span>
    <span class="c1"># Blueprint 객체 bp를 등록합니다.</span>
    <span class="n">app</span><span class="o">.</span><span class="n">register_blueprint</span><span class="p">(</span><span class="n">main_views</span><span class="o">.</span><span class="n">bp</span><span class="p">)</span>
    
    <span class="c1"># bp 객체를 app에 등록했으므로 </span>
    <span class="c1"># 기존에 있던 코드는 삭제합니다.</span>
    <span class="c1"># @app.route(&#39;/&#39;)</span>
    <span class="c1"># def hello_world():</span>
    <span class="c1">#     return &#39;Hello world! Welcome to CJU.&#39;</span>
    <span class="c1"># create_app 함수가 생성한 app을 리턴</span>
    
    <span class="k">return</span> <span class="n">app</span> 
</pre></div>
</div>
<p>파일을 저장하고 flask 서버를 재시작 한 후에 <code class="docutils literal notranslate"><span class="pre">http://localhost:5000/</span></code>로 접속을 시도하면 정상적으로 잘 작동하는 것을 확인할 수 있습니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">Blueprint</span></code> 클래스 개념을 잡았으니 내친김에 별도 경로를 갖는 웹페이지와 해당 페이지 URL이 호출되었을 경우 처리할 함수를 하나 만들어 보겠습니다.</p>
<p>전공을 소개하는 웹페이지를 하나 더 만들도록 하겠습니다.
전공 소개 웹사이트 URL은 <code class="docutils literal notranslate"><span class="pre">/major</span></code>로 지정하고, 웹페이지에 표시할 내용은 <code class="docutils literal notranslate"><span class="pre">/views/main_view.py</span></code> 모듈에 <code class="docutils literal notranslate"><span class="pre">intro_major</span></code> 함수로 만들어서 추가하겠습니다.</p>
<p>앞에서 작성한 <code class="docutils literal notranslate"><span class="pre">/views/main_view.py</span></code> 모듈에 아래와 같이 내용을 추가해 봅니다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 파일명: views/main_views.py</span>

<span class="c1"># 전공소개 페이지 추가</span>
<span class="nd">@bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/major&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">intro_major</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;우리 전공은 인공지능소프트웨어입니다.&#39;</span>
</pre></div>
</div>
<p>VS code에서 작업한 화면은 그림 <a class="reference internal" href="#sec03-04-add-page-major-intro"><span class="std std-numref">Fig. 3.4</span></a>와 같습니다.</p>
<div class="figure align-left" id="sec03-04-add-page-major-intro">
<a class="reference internal image-reference" href="../../_images/sec03_04_add_page_major_intro.png"><img alt="flask_tutorial" src="../../_images/sec03_04_add_page_major_intro.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.4 </span><span class="caption-text">전공 소개 페이지 코드를 추가</span><a class="headerlink" href="#sec03-04-add-page-major-intro" title="Permalink to this image">¶</a></p>
</div>
<p>크롬과 같은 웹 브라우저 주소창에 <code class="docutils literal notranslate"><span class="pre">127.0.0.1:500/major</span></code> 또는 <code class="docutils literal notranslate"><span class="pre">localhost:5000/major</span></code>라고 입력하고 엔터를 누릅니다.</p>
<div class="figure align-left" id="sec03-05-chorme-major-page">
<a class="reference internal image-reference" href="../../_images/sec03_05_chorme_major_page.png"><img alt="flask_tutorial" src="../../_images/sec03_05_chorme_major_page.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.5 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">Blueprint</span></code>를 이용해 추가된 새로운 웹페이지 접속</span><a class="headerlink" href="#sec03-05-chorme-major-page" title="Permalink to this image">¶</a></p>
</div>
<p>그림 {numref}‘sec03_05_chorme_major_page’ 같이 flask 서버의 응답(response) 결과를 확인할 수 있습니다.
브라우저에 표시된 <code class="docutils literal notranslate"><span class="pre">우리</span> <span class="pre">전공은</span> <span class="pre">인공지능소프트웨어입니다.</span></code>라는 문자열은
우리가 <code class="docutils literal notranslate"><span class="pre">views/main_view.py</span></code>에 추가한 <code class="docutils literal notranslate"><span class="pre">{code}</span> <span class="pre">python</span> <span class="pre">def</span> <span class="pre">intro_major():</span></code> 함수에서 처리하여 리턴한 내용입니다.
새로운 웹페이지 주소 <code class="docutils literal notranslate"><span class="pre">/major</span></code>를 추가했지만 <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> 내용을 수정하지 않고 편리하게 구현을 할 수 있게 되었습니다.</p>
<p>여기까지 이해한다면 여러분은 다양한 페이지를 만들어서
웹 시스템으로 서비스할 능력을 갖춘 것입니다.</p>
<p>축하드립니다. 짝짝짝!</p>
<p>우리가 지금까지 구현한 시스템은 내부적으로 데이터를 관리하거나
인터넷 사용자로부터 데이터를 가져올 수 없는 구조입니다.</p>
<p>이를 해결하기 위해서는 웹 시스템에서 사용할 데이터베이스가 필요합니다.</p>
<p>여러분, 이제 다음 기본기를 배울 준비가 되셨나요? 다음 기본기는 바로 데이터베이스 관련 내용들입니다.</p>
<p>그러면 차근차근 스텝을 밟아 보도록 하겠습니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">Next</span></code> 아이콘을 클릭하여 시작해 보세요.</p>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./Contents\Section03_building_fundamentals"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="sec03_ch02_application_factory.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">3.2. </span>Application Factory 패턴</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="sec03_ch04_ORM_model.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">3.4. </span>ORM 모델 완벽 이해</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      으로 Giseop Noh<br/>
    
        &copy; 저작권 Prof. Giseop Noh in Cheongju University.<br/>
      <div class="extra_footer">
        <p>
    본 책자에 적용되는 라이센스 
    <a href="https://opensource.org/licenses/MIT">
      MIT License
    </a>.
</p>

      </div>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>